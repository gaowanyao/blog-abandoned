<!DOCTYPE html>
<!--[if IE 8]> <html lang="en" class="ie8 no-js"> <![endif]-->
<!--[if IE 9]> <html lang="en" class="ie9 no-js"> <![endif]-->
<!--[if !IE]><!-->
<html lang="en">
<!--<![endif]-->
<!-- BEGIN HEAD -->

<head>
    <meta charset="utf-8" />
    <title>Blog</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta content="width=device-width, initial-scale=1" name="viewport" />
    <meta content="#1 selling multi-purpose bootstrap admin theme sold in themeforest marketplace packed with angularjs, material design, rtl support with over thausands of templates and ui elements and plugins to power any type of web applications including saas and admin dashboards. Preview page of Theme #1 for blog listing page"
          name="description" />
    <meta content="" name="author" />
    <!-- BEGIN GLOBAL MANDATORY STYLES -->
    <link href="http://fonts.googleapis.com/css?family=Open+Sans:400,300,600,700&subset=all" rel="stylesheet" type="text/css" />
    <link href="__STATIC__/assets/global/plugins/font-awesome/css/font-awesome.min.css" rel="stylesheet" type="text/css" />
    <link href="__STATIC__/assets/global/plugins/simple-line-icons/simple-line-icons.min.css" rel="stylesheet" type="text/css" />
    <link href="__STATIC__/assets/global/plugins/bootstrap/css/bootstrap.min.css" rel="stylesheet" type="text/css" />
    <link href="__STATIC__/assets/global/plugins/bootstrap-switch/css/bootstrap-switch.min.css" rel="stylesheet" type="text/css" />
    <!-- END GLOBAL MANDATORY STYLES -->

    <link href="__STATIC__/assets/global/plugins/datatables/datatables.min.css" rel="stylesheet" type="text/css" />
    <link href="__STATIC__/assets/global/plugins/datatables/plugins/bootstrap/datatables.bootstrap.css" rel="stylesheet" type="text/css" />
    <link href="__STATIC__/assets/global/plugins/bootstrap-datepicker/css/bootstrap-datepicker3.min.css" rel="stylesheet" type="text/css" />
    <!-- END PAGE LEVEL PLUGINS -->
    <link href="__STATIC__/assets/global/plugins/bootstrap-select/css/bootstrap-select.min.css" rel="stylesheet" type="text/css" />

    <link href="__STATIC__/assets/global/plugins/bootstrap-tagsinput/bootstrap-tagsinput.css" rel="stylesheet" type="text/css" />
    <link href="__STATIC__/assets/global/plugins/typeahead/typeahead.css" rel="stylesheet" type="text/css" />

    <!-- BEGIN THEME GLOBAL STYLES -->
    <link href="__STATIC__/assets/global/css/components.min.css" rel="stylesheet" id="style_components" type="text/css" />
    <link href="__STATIC__/assets/global/css/plugins.min.css" rel="stylesheet" type="text/css" />
    <!-- END THEME GLOBAL STYLES -->
    <!-- BEGIN PAGE LEVEL PLUGINS -->
    <link href="__STATIC__/assets/global/plugins/bootstrap-fileinput/bootstrap-fileinput.css" rel="stylesheet" type="text/css" />
    <!-- END PAGE LEVEL PLUGINS -->
    <!-- BEGIN PAGE LEVEL STYLES -->
    <link href="__STATIC__/assets/pages/css/blog.min.css" rel="stylesheet" type="text/css" />
    <!-- END PAGE LEVEL STYLES -->
    <!-- BEGIN THEME LAYOUT STYLES -->
    <link href="__STATIC__/assets/layouts/layout/css/layout.min.css" rel="stylesheet" type="text/css" />
    <link href="__STATIC__/assets/layouts/layout/css/themes/darkblue.min.css" rel="stylesheet" type="text/css" id="style_color" />
    <link href="__STATIC__/assets/layouts/layout/css/custom.min.css" rel="stylesheet" type="text/css" />
    <!-- END THEME LAYOUT STYLES -->
    <link rel="shortcut icon" href="__STATIC__/gcan.ico" /> </head>




</head>
<!-- END HEAD -->

<body class="page-header-fixed page-sidebar-closed-hide-logo page-content-white">
<div class="page-wrapper">

    {include file="Public/header"/}
    <!-- END HEADER & CONTENT DIVIDER -->
    <!-- BEGIN CONTAINER -->
    <div class="page-container">

        {include file="Public/left" active="article" open="article"/}

        <!-- BEGIN CONTENT -->
        <div class="page-content-wrapper">
            <!-- BEGIN CONTENT BODY -->
            <div class="page-content">
                <!-- BEGIN PAGE HEADER-->

                <!-- BEGIN PAGE BAR -->
                <div class="page-bar">
                    <ul class="page-breadcrumb">
                        <li>
                            <a href="article">文章管理</a>
                            <i class="fa fa-circle"></i>
                        </li>
                        <li>
                            <span>更新文章</span>
                        </li>
                    </ul>
                </div>
                <!-- END PAGE BAR -->
                <br/>
                <div class="row">
                    <div class="col-md-12">
                        <!-- BEGIN PORTLET-->
                        <div class="portlet light form-fit bordered">
                            <div class="portlet-title">
                                <div class="caption">
                                    <i class="icon-settings font-green"></i>
                                    <span class="caption-subject font-green sbold uppercase">更新文章</span>
                                </div>

                            </div>
                            <div class="portlet-body form">
                                <!-- BEGIN FORM-->
                                <form action="update_article_msg" method="post" enctype="multipart/form-data" class="form-horizontal form-bordered">
                                    <div class="form-body">

                                        <input type="text"  name="id" value="{$article.id}" hidden>
                                        <input type="text"  name="time" value="{$article.content}" hidden>


                                        <div class="form-group">
                                            <label class="control-label col-md-3">标题</label>
                                            <div class="col-md-5">

                                                <input value="{$article.title}" type="text" class="form-control" maxlength="100" name="title" id="title" placeholder="请输入标题">

                                            </div>
                                        </div>

                                        <div class="form-group">
                                            <label class="control-label col-md-3">作者</label>
                                            <div class="col-md-3">

                                                <input  value="{$article.author}" type="text" class="form-control" maxlength="100" name="author" id="author" placeholder="请输入作者">

                                            </div>
                                        </div>

                                        <div class="form-group">
                                            <label class="control-label col-md-3">标签</label>
                                            <div class="col-md-7">


                                                <select id="tag"  multiple data-role="tagsinput">

                                                    <?php

                                                $tag = $article['tag'];
                                                $arr = explode(",",$tag);

                                                $str = "";
                                                for($i=0;$i<count($arr);$i++){
                                                    if($arr[$i] == ''){}else{
                                                        $str .= "<option value='".$arr[$i]."'>".$arr[$i]."</option>";
                                                           }
                                                       }
                                                          echo $str;

                                                    ?>

                                                </select>


                                                <input type="text"  name="tag" id="tags" hidden>

                                            </div>
                                        </div>


                                        <div class="form-group">
                                            <label class="control-label col-md-3">上传图片</label>
                                            <div class="col-md-9">
                                                <div class="fileinput fileinput-new" data-provides="fileinput">
                                                    <div class="fileinput-new thumbnail" style="width: 200px; height: 150px;">
                                                        <img style="width: 100%;height: 100%;" src="<?php if($article['article_picture'] == ''){ echo 'http://www.placehold.it/200x150/EFEFEF/AAAAAA&amp;text=no+image';}else{echo $article['article_picture'];} ?>" onerror="javascript:this.src='http://www.placehold.it/200x150/EFEFEF/AAAAAA&amp;text=no+image';"  alt="" /> </div>
                                                    <div class="fileinput-preview fileinput-exists thumbnail" style="max-width: 200px; max-height: 150px;"> </div>
                                                    <div>
                                                                <span class="btn default btn-file">
                                                                    <span class="fileinput-new"> 选择图片 </span>
                                                                    <span class="fileinput-exists"> 更选 </span>
                                                                    <input type="file" name="article_picture"> </span>
                                                        <a href="javascript:;" class="btn red fileinput-exists" data-dismiss="fileinput"> 移除 </a>
                                                    </div>
                                                </div>
                                                <div class="clearfix margin-top-10">
                                                    <span class="label label-danger">NOTE!</span> Image preview only works in IE10+, FF3.6+, Safari6.0+, Chrome6.0+ and Opera11.1+. In older browsers the filename is shown instead. </div>
                                            </div>
                                        </div>

                                        <div class="form-group last">
                                            <label class="control-label col-md-3">内容</label>
                                            <div class="col-md-8">

                                                <script  id="container" name="content" type="text/plain">
                                                    {$content}
                                                </script>

                                            </div>
                                        </div>


                                    </div>

                                    <div class="form-actions">
                                        <div class="row">
                                            <div class="col-md-offset-3 col-md-9">
                                                <a id="submit_confirm" href="javascript:;" class="btn green">
                                                    <i class="fa fa-check"></i> 提交
                                                </a>
                                                <!--<a href="javascript:;" class="btn btn-outline grey-salsa">重置</a>-->
                                                <button id="submit" type="submit" style="display: none;" class="btn btn-outline grey-salsa">提交</button>
                                                <button type="reset" class="btn btn-outline grey-salsa">重置</button>
                                            </div>
                                        </div>
                                    </div>

                                </form>
                                <!-- END FORM-->
                            </div>
                        </div>
                        <!-- END PORTLET-->
                    </div>
                </div>
            </div>
            <!-- END CONTENT BODY -->
        </div>
        <!-- END CONTENT -->


        {include file="Public/quick_sidebar"/}

    </div>
    <!-- END CONTAINER -->

    {include file="Public/footer"/}
</div>


{include file="Public/quick_nav"/}



<div class="modal fade draggable-modal" id="draggable" tabindex="-1" role="basic" aria-hidden="true">
    <div class="modal-dialog" style="padding-top:200px;">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true"></button>
                <h4 class="modal-title">提示</h4>
            </div>
            <div class="modal-body" id="modal-body">  </div>
            <div class="modal-footer">
                <button type="button" class="btn dark btn-outline" data-dismiss="modal">确定</button>
                <!--<button type="button" class="btn green">Save changes</button>-->
            </div>
        </div>
        <!-- /.modal-content -->
    </div>
    <!-- /.modal-dialog -->
</div>





<!--[if lt IE 9]>
<script src="__STATIC__/assets/global/plugins/respond.min.js"></script>
<script src="__STATIC__/assets/global/plugins/excanvas.min.js"></script>
<script src="__STATIC__/assets/global/plugins/ie8.fix.min.js"></script>
<![endif]-->
<!-- BEGIN CORE PLUGINS -->
<script src="__STATIC__/assets/global/plugins/jquery.min.js" type="text/javascript"></script>
<script src="__STATIC__/assets/global/plugins/bootstrap/js/bootstrap.min.js" type="text/javascript"></script>
<script src="__STATIC__/assets/global/plugins/js.cookie.min.js" type="text/javascript"></script>
<script src="__STATIC__/assets/global/plugins/jquery-slimscroll/jquery.slimscroll.min.js" type="text/javascript"></script>
<script src="__STATIC__/assets/global/plugins/jquery.blockui.min.js" type="text/javascript"></script>
<script src="__STATIC__/assets/global/plugins/bootstrap-switch/js/bootstrap-switch.min.js" type="text/javascript"></script>
<!-- END CORE PLUGINS -->

<!-- END PAGE LEVEL PLUGINS -->
<script src="__STATIC__/assets/global/plugins/bootstrap-maxlength/bootstrap-maxlength.min.js" type="text/javascript"></script>
<!-- END PAGE LEVEL PLUGINS -->
<script src="__STATIC__/assets/global/plugins/bootstrap-select/js/bootstrap-select.min.js" type="text/javascript"></script>

<script src="__STATIC__/assets/global/scripts/app.min.js" type="text/javascript"></script>
<!-- END THEME GLOBAL SCRIPTS -->
<!-- BEGIN PAGE LEVEL SCRIPTS -->
<!--<script src="__STATIC__/assets/pages/scripts/components-bootstrap-maxlength.min.js" type="text/javascript"></script>-->
<!-- END PAGE LEVEL SCRIPTS -->



<script src="__STATIC__/assets/pages/scripts/components-bootstrap-select.min.js" type="text/javascript"></script>


<!-- BEGIN THEME LAYOUT SCRIPTS -->
<script src="__STATIC__/assets/layouts/layout/scripts/layout.min.js" type="text/javascript"></script>
<script src="__STATIC__/assets/layouts/layout/scripts/demo.min.js" type="text/javascript"></script>
<script src="__STATIC__/assets/layouts/global/scripts/quick-sidebar.min.js" type="text/javascript"></script>
<script src="__STATIC__/assets/layouts/global/scripts/quick-nav.min.js" type="text/javascript"></script>
<!-- END THEME LAYOUT SCRIPTS -->

<!-- BEGIN PAGE LEVEL PLUGINS -->
<script src="__STATIC__/assets/global/scripts/datatable.js" type="text/javascript"></script>
<script src="__STATIC__/assets/global/plugins/datatables/datatables.min.js" type="text/javascript"></script>
<script src="__STATIC__/assets/global/plugins/datatables/plugins/bootstrap/datatables.bootstrap.js" type="text/javascript"></script>
<script src="__STATIC__/assets/global/plugins/bootstrap-datepicker/js/bootstrap-datepicker.min.js" type="text/javascript"></script>
<!-- END PAGE LEVEL PLUGINS -->
<!-- BEGIN THEME GLOBAL SCRIPTS -->
<script src="__STATIC__/assets/pages/scripts/components-bootstrap-tagsinput.min.js" type="text/javascript"></script>
<script src="__STATIC__/assets/global/plugins/bootstrap-tagsinput/bootstrap-tagsinput.min.js" type="text/javascript"></script>

<!-- BEGIN PAGE LEVEL SCRIPTS -->
<script src="__STATIC__/assets/pages/scripts/table-datatables-buttons.min.js" type="text/javascript"></script>
<!-- END PAGE LEVEL SCRIPTS -->
<!-- BEGIN PAGE LEVEL PLUGINS -->
<script src="__STATIC__/assets/global/plugins/bootstrap-fileinput/bootstrap-fileinput.js" type="text/javascript"></script>

<script src="__STATIC__/assets/global/plugins/jquery-ui/jquery-ui.min.js" type="text/javascript"></script>
<script src="__STATIC__/assets/pages/scripts/ui-modals.min.js" type="text/javascript"></script>
<!-- END PAGE LEVEL SCRIPTS -->

<!-- 配置文件 -->
<script type="text/javascript" src="__STATIC__/ueditor/ueditor.config.js"></script>
<!-- 编辑器源码文件 -->
<script type="text/javascript" src="__STATIC__/ueditor/ueditor.all.js"></script>
<!-- 实例化编辑器 -->
<script type="text/javascript">
    var ue = UE.getEditor('container');
</script>


<script>


    $(document).ready(function () {


        $("#submit_confirm").click(function () {
            var title = $("#title").val();
            var author = $("#author").val();


            var str = "";
            var str = $("#tag option:selected").map(function(){
                return $(this).val();
            }).get().join(",");

            console.log(str);
            $("#tags").val(str);




            if(title == ""){
                $("#modal-body").html("请输入标题");
                $("#draggable").modal("show");
                return;
            }
            if(author == ""){
                $("#modal-body").html("请输入作者");
                $("#draggable").modal("show");
                return;
            }

            ue.ready(function() {
                //设置编辑器的内容
                //获取html内容，返回: <p>hello</p>
                var html = ue.getContent();

            });
            var has = ue.hasContents();

            if(has == false){
                $("#modal-body").html("请输入文章内容");
                $("#draggable").modal("show");
                return;
            }



            $("#submit").click();
        })




    })



</script>



<!--最大长度-->
<script>

    var ComponentsBootstrapMaxlength = function () {

        var handleBootstrapMaxlength = function() {

            $('#title').maxlength({
                limitReachedClass: "label label-danger",
                threshold: 20
            });
            $('#author').maxlength({
                limitReachedClass: "label label-danger",
                threshold: 20
            });

            $('#maxlength_defaultconfig').maxlength({
                limitReachedClass: "label label-danger",
            })

            $('#maxlength_thresholdconfig').maxlength({
                limitReachedClass: "label label-danger",
                threshold: 20
            });



            $('#maxlength_alloptions').maxlength({
                alwaysShow: true,
                warningClass: "label label-success",
                limitReachedClass: "label label-danger",
                separator: ' out of ',
                preText: 'You typed ',
                postText: ' chars available.',
                validate: true
            });

            $('#maxlength_textarea').maxlength({
                limitReachedClass: "label label-danger",
                alwaysShow: true
            });

            $('#maxlength_placement').maxlength({
                limitReachedClass: "label label-danger",
                alwaysShow: true,
                placement: App.isRTL() ? 'top-right' : 'top-left'
            });
        }

        return {
            //main function to initiate the module
            init: function () {
                handleBootstrapMaxlength();
            }
        };

    }();

    jQuery(document).ready(function() {
        ComponentsBootstrapMaxlength.init();
    });


</script>


</body>

</html>