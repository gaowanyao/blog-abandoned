<!DOCTYPE HTML>
<html>
<head>
    <meta charset="utf-8">
    <title>websocket</title>

    <link href="http://fonts.googleapis.com/css?family=Open+Sans:400,300,600,700&subset=all" rel="stylesheet" type="text/css" />
    <link href="__STATIC__/assets/global/plugins/font-awesome/css/font-awesome.min.css" rel="stylesheet" type="text/css" />
    <link href="__STATIC__/assets/global/plugins/simple-line-icons/simple-line-icons.min.css" rel="stylesheet" type="text/css" />
    <link href="__STATIC__/assets/global/plugins/bootstrap/css/bootstrap.min.css" rel="stylesheet" type="text/css" />
    <link href="__STATIC__/assets/global/plugins/bootstrap-switch/css/bootstrap-switch.min.css" rel="stylesheet" type="text/css" />
    <!-- END GLOBAL MANDATORY STYLES -->
    <!-- BEGIN THEME GLOBAL STYLES -->
    <link href="__STATIC__/assets/global/css/components.min.css" rel="stylesheet" id="style_components" type="text/css" />
    <link href="__STATIC__/assets/global/css/plugins.min.css" rel="stylesheet" type="text/css" />
    <!-- END THEME GLOBAL STYLES -->
    <!-- BEGIN PAGE LEVEL STYLES -->
    <link href="__STATIC__/assets/pages/css/blog.min.css" rel="stylesheet" type="text/css" />
    <!-- END PAGE LEVEL STYLES -->
    <!-- BEGIN THEME LAYOUT STYLES -->
    <link href="__STATIC__/assets/layouts/layout3/css/layout.min.css" rel="stylesheet" type="text/css" />
    <link href="__STATIC__/assets/layouts/layout3/css/themes/default.min.css" rel="stylesheet" type="text/css" id="style_color" />
    <link href="__STATIC__/assets/layouts/layout3/css/custom.min.css" rel="stylesheet" type="text/css" />
    <script src="__STATIC__/assets/global/plugins/jquery.min.js" type="text/javascript"></script>

    <script src='//cdn.bootcss.com/socket.io/1.3.7/socket.io.js'></script>



    <!--<script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/2.0.3/socket.io.js"></script>-->



</head>
<body>

<button class="btn blue" id="bb">点我</button>

<p id="aa"></p>



<script>
    // 如果服务端不在本机，请把127.0.0.1改成服务端ip
    var socket = io('ws://gcan.chinacloudapp.cn:2346');
    // 当连接服务端成功时触发connect默认事件
//    socket.on('connect', function(){
//        console.log('connect success');
//        console.log('connect success');
//    });

    console.log(socket);


    $("#bb").click(function () {
       console.log("bb");
//        var dd = socket.emit("co",function (data) {
//            console.log(data);
//            console.log("11");
//
//        });
//        console.log(dd);
        var ff = socket.emit('chat message', '这个是消息内容...');
        console.log(ff);



//        // 触发服务端的chat message事件
//        socket.emit('co', '这个是消息内容...');
//        // 服务端通过emit('chat message from server', $msg)触发客户端的chat message from server事件
//        socket.on('haha2', function(msg){
//            console.log('get message:' + msg + ' from server');
//        });

    });

    var ee = socket.on('con', function(msg){
        console.log( msg );
        console.log( "con" );
    });

            socket.on('chat message', function(msg){
                console.log('get message:' + msg + ' from server');
            });

//    socket.on('haha2', function(data){
//
//        console.log("asdas");
//    });

    //        监听socket断开与重连。
    socket.on('disconnect', function() {
        console.log("与服务其断开");
    });


    socket.on('reconnect', function() {
        console.log("重新连接到服务器");
    });
</script>

</body>
</html>